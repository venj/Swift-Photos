美图赏
=====

**项目已经兼容Swift 3.0，需要Xcode 8.0+编译。**

美图欣赏利器。Deployment Target现在最低为iOS 9.0。

** 代码已更新至兼容Swift 3.0。大部分均为Xcode向导处理的更新。暂未对代码进行优化。可能引入退行Bug。 **

编译
----

你需要安装最新版的Xcode 3+和Cocoa Pods（1.11+?）。然后执行如下操作：

``` bash
cp Swift\ Photos/Common.swift.skel Swift\ Photos/Common.swift #(编辑，并填入正确的网址。)
pod install
patch -p1 -i MWPhotoBrowser.patch
```

然后打开Swift Photo.xcworkspace，编译安装即可。

更新记录
-------

**2.3(124, 测试版)**

- 用[Fuzi](https://github.com/cezheng/Fuzi)替代正则表达式来精确抓取元素
- 修正了一个很古老的搜索bug
- 已知问题：某板块的置顶贴暂时无法去除

**2.3(108, 测试版)**

- 更换了HUD和密码控件
- 大量代码重构

**2.2(97, 测试版)**

- Swift 2.0兼容。

**2.2(78, 测试版)**

- 网络请求超时调整为10s，以减少网络条件不好时的等待。

**2.1(59, 测试版)**

- 增加了搜索栏。（临时方案，目前有大量代码重复，需要重构。）

**2.1(56, 测试版)**

- 修正了某些链接会导致应用崩溃的问题。

**2.1(53, 测试版)**

- 现在显示图片Caption，以在标题太长的时候显示看图进度。

**2.1(52, 测试版)**

- 现在用户如果已缓存图片，那么点击标题的时候直接展示缓存图。（如果用户未缓存全图片，目前暂时无法继续缓存，以后改进。）

**2.1(50, 测试版)**

- 现在点击帖子，将自动并发下载所有图片。（数百张图片时压力有点大，以后改进）

**2.0(47)**

- 修正了在加载论坛帖子列表时在文档目录创建大量空文件夹的问题。

**2.0(44, 测试版)**

- 现在已经支持iPhone 6, 6 Plus的全新分辨率
- 现在已支持TouchID解锁（感谢`LTHPasscodeViewController`）
- 换回`MWPhotoBrowser`
- iOS 7已不再支持

**2.0(38, 测试版)**

- 使用了一个兼容iOS 7+的图片浏览器
- 使用了一个兼容iOS 7+的密码工具（尚未完成）
- iPhone 6兼容基本完成

**1.2(34)**

- 加入保存缓存文件的功能（暂时只能保存已经缓存的图片）。
- 保存完成后（可能没有完整保存），该帖子标题变成蓝色。
- 打开了iTunes文件共享。
- 重构了部分代码。

**1.1(29)**

- 修正了iOS 7下的ActionSheet标题错乱的问题。
- 修正了调整了标题栏按钮顺序后，iPad上ActionSheet箭头位置错误的问题。

**1.1(28)**

- 修正了iOS 7的兼容性问题。

**1.0(27)**

- 保存最后一次浏览的板块，下次打开会首先打开该板块。

已知问题
--------

- **已修正** <del>帖子列表的解析有时会出现问题。</del>
- **已修正** <del>部分帖子无法获取全部图片。</del>
- **已修正** <del>照片滑动切换在竖屏时有问题，出现问题时，请使用横屏浏览。</del>
- **已修正** <del>iPad，iOS 8上的`UIActionSheet`的Autolayout有bug，暂时用`UIAlertController`的Alert模式作为选择类别的方法。</del>
- 网络状况不好的时候，由于网络超时时间过长，HUD有时无法自动消失，需要杀掉程序后重新打开。
- 偶尔会发生ViewController层叠错乱。
- **已修正** <del>密码输入控件太老。<del>
- 照片浏览器返回按钮标题总是显示同一个标题。
- 目前使用了一个比较不严格的特殊字符转义方法，部分图片链接的转义可能会失败。

计划
----

1. **已完成** <del>解决iOS 7兼容问题</del>(注，已不再iOS 7兼容)
2. **已完成** <del>用HTML DOM处理，取代正则表达式来获取内容</del>
